
-- VFX for Sunblitz.TP.Part.Windy
-- Define the effect
local Test = game.ReplicatedStorage.Resources.TerribleTornado.Wind2.Part.Attachment
-- Delay configuration
local startupDelay = 1.2 -- Delay in seconds before the effect starts

-- Function to smoothly fade out particle emitters
local function fadeOutParticles(particleEmitter, duration)
    local startTransparency = particleEmitter.Transparency.Keypoints[1].Value
    local endTransparency = 1 -- Fully transparent

    for i = 0, duration, 0.1 do
        local alpha = i / duration
        local currentTransparency = startTransparency + (endTransparency - startTransparency) * alpha
        particleEmitter.Transparency = NumberSequence.new(currentTransparency)
        task.wait(0.1)
    end

    -- Fully disable the particle emitter after fading out
    particleEmitter.Enabled = false
end

-- Function to play the effect
local function playEffect()
    local test = Test:Clone()
    test.Parent = game.Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")

    -- Adjust the attachment's position to move it downward
    test.Position = Vector3.new(0, -2.45, 0) -- Moves the attachment 2.45 studs down relative to the parent

    -- Rotate the attachment to face upwards
    test.CFrame = test.CFrame * CFrame.Angles(math.rad(0), 0, 0)

    -- Configure particle emitters
    for _, child in ipairs(test:GetChildren()) do
        if child:IsA("ParticleEmitter") then
            child.Color = ColorSequence.new(Color3.new(0, 0, 0)) -- Set particles to black
            child:Emit(30)
            child.Enabled = true

            -- Start fading out the particles after 2 seconds
            task.delay(0.4, function()
                fadeOutParticles(child, 1) -- Fade out over 1 second
            end)
        end
    end

    -- Destroy the effect after the fade-out completes
    task.delay(2, function()
        test:Destroy()
    end)
end

-- Trigger the effect with a delay
task.delay(startupDelay, playEffect)
